# Netflix 시스템 아키텍처 분석

## 1. 개요

Netflix는 전 세계에서 2억 명 이상의 사용자에게 스트리밍 서비스를 제공하는 거대한 플랫폼입니다. 이 문서에서는 Netflix의 핵심 시스템 아키텍처 구성 요소와 데이터 흐름에 대해 분석합니다.

## 2. 핵심 구성 요소

### 2.1 클라이언트 계층

- **클라이언트 애플리케이션**: 사용자가 Netflix 콘텐츠와 상호작용하는 모바일 앱, 웹 브라우저, 스마트 TV 앱 등의 다양한 디바이스 애플리케이션

### 2.2 웹 서버 계층

- **웹 서버**: 클라이언트 요청을 처리하고 적절한 서비스로 라우팅
- **캐시**: 자주 요청되는 데이터를 저장하여 데이터베이스 부하 감소 및 응답 시간 개선

### 2.3 데이터 저장 및 처리 계층

- **로드 밸런서**: 들어오는 트래픽을 여러 서버에 분산하여 시스템 안정성과 가용성 보장
- **리더 데이터베이스**: SQL 및 SL(아마도 Schemaless) 데이터베이스를 포함한 주요 데이터 저장소
- **CDN(Content Delivery Network)**: 전 세계 여러 위치에 비디오 콘텐츠를 캐싱하여 사용자에게 빠른 콘텐츠 전송
- **비디오 스토리지**: 약 1PB(Petabyte) 규모의 대용량 비디오 저장소
- **분석/로그**: 사용자 행동 및 시스템 성능에 관한 데이터 저장

### 2.4 서비스 계층

- **메시지 서비스(Kafka)**: 시스템 내 다양한 구성 요소 간의 비동기 통신을 위한 메시지 큐 시스템
- **검색 서비스**: 사용자가 콘텐츠를 검색할 수 있는 기능 제공
- **메시지 큐**: 검색 요청 처리 및 다른 서비스에 전달
- **추천 서비스**: 사용자의 시청 기록과 선호도를 기반으로 개인화된 콘텐츠 추천

## 3. 데이터 흐름

### 3.1 사용자 요청 처리 흐름

1. 사용자가 클라이언트 앱을 통해 요청 생성
2. 웹 서버가 요청 수신 및 처리:
   - 캐시에서 데이터 확인 및 있으면 즉시 반환
   - 없으면 요청을 다음 계층으로 전달
3. 로드 밸런서가 트래픽을 적절한 서버로 분산
4. 리더 데이터베이스에서 필요한 데이터 검색

### 3.2 콘텐츠 스트리밍 흐름

1. 사용자가 비디오 재생 요청
2. 요청이 CDN으로 라우팅
3. CDN이 최적의 위치에서 비디오 데이터 스트리밍
4. 대용량(1PB) 비디오 저장소에서 필요한 콘텐츠 제공

### 3.3 검색 및 추천 흐름

1. 사용자가 검색 쿼리 입력 또는 추천 요청
2. 웹 서버가 요청을 검색 서비스나 추천 서비스로 라우팅
3. 검색 서비스는 메시지 큐를 통해 요청 처리
4. 추천 서비스는 사용자 데이터와 분석 정보를 활용하여 개인화된 추천 생성

### 3.4 데이터 수집 및 분석 흐름

1. 사용자 활동이 로그 시스템에 기록
2. Kafka를 통해 데이터가 분석 시스템으로 전달
3. 분석된 데이터는 추천 시스템 개선에 활용

## 4. 주요 기술적 특징

### 4.1 확장성

- **수평적 확장**: 로드 밸런서를 통한 서버 분산
- **CDN 활용**: 전 세계 여러 위치에 콘텐츠 분산

### 4.2 안정성

- **리더 데이터베이스**: 여러 DB 기술(SQL, SL) 조합으로 데이터 안정성 확보
- **메시지 큐 시스템**: 시스템 간 비동기 통신으로 장애 격리

### 4.3 성능

- **캐싱 전략**: 다층적 캐싱(웹 서버 캐시, CDN)
- **Kafka를 활용한 비동기 처리**: 실시간 데이터 처리 성능 향상

### 4.4 개인화

- **추천 서비스**: 사용자별 맞춤형 콘텐츠 제공
- **분석 시스템**: 사용자 행동 데이터 분석 및 피드백 활용

## 5. 결론

Netflix의 시스템 아키텍처는 대규모 사용자를 지원하기 위한 확장성, 안정성, 성능에 중점을 둔 설계입니다. 클라이언트부터 CDN, 데이터베이스, 다양한 마이크로서비스까지 여러 계층의 최적화된 구성 요소들이 조화롭게 동작하여 전 세계 사용자에게 고품질 스트리밍 서비스를 제공합니다. 특히 Kafka를 중심으로 한 메시지 기반 아키텍처와 CDN을 활용한 콘텐츠 전송 최적화는 Netflix 시스템의 핵심 경쟁력으로 볼 수 있습니다.